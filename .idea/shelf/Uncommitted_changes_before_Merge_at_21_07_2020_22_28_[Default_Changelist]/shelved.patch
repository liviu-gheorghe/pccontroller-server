Index: src/main/java/backend/actions/ActionReceiveFile.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package backend.actions;\r\n\r\nimport backend.Action;\r\nimport backend.FileServer;\r\nimport backend.ReceivedActionsCodes;\r\n\r\nimport java.io.*;\r\nimport java.util.UUID;\r\n\r\npublic class ActionReceiveFile implements Action {\r\n\r\n    private final DataInputStream dataInputStream;\r\n    private final int BUFFER_SIZE = 1024*40;\r\n\r\n    public ActionReceiveFile(InputStream inputStream) {\r\n        dataInputStream = new DataInputStream(inputStream);\r\n    }\r\n\r\n    @Override\r\n    public void execute() {\r\n        new Thread(\r\n                () -> {\r\n                    int totalNumberOfBytes = 0;\r\n                    long t1 = System.currentTimeMillis();\r\n                    String fileName = UUID.randomUUID().toString();\r\n                    File newFile = new File(String.format(\"/home/liviu/Documents/%s\",fileName));\r\n                    try {\r\n                        byte[] buffer = new byte[BUFFER_SIZE];\r\n                        int numberOfBytes;\r\n                        FileOutputStream fileOutputStream = new FileOutputStream(newFile);\r\n                        while((numberOfBytes = dataInputStream.read(buffer,0,BUFFER_SIZE)) != -1) {\r\n                            if(numberOfBytes > 0) {\r\n                                totalNumberOfBytes += numberOfBytes;\r\n                                fileOutputStream.write(buffer,0,numberOfBytes);\r\n                            }\r\n                            //if(bytes % 1024*20 ==0) System.out.println(bytes/1024+\" KB read so far\");\r\n                        }\r\n                        fileOutputStream.close();\r\n                    } catch (IOException exception) {\r\n                        exception.printStackTrace();\r\n                        try {\r\n                            boolean status = newFile.delete();\r\n                            System.out.println(\"An error occurred during file transmission,trying to delete the file\");\r\n                            System.out.println((status)?\"Deleted successfully\":\"Error trying to delete the file\");\r\n                        }\r\n                        catch(SecurityException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                    finally {\r\n                        FileServer.getInstance().clearConnection();\r\n                    }\r\n                    long t2 = System.currentTimeMillis();\r\n                    double seconds = (t2-t1)/1000.0;\r\n                    System.out.printf(\"Transferred %d bytes successfully , time = %fs\\n\",totalNumberOfBytes,seconds);\r\n                    double transferSpeed = (totalNumberOfBytes/(1024*1024.0))/seconds;\r\n                    System.out.printf(\"Average transfer speed is : %f MB/s\",transferSpeed);\r\n                }\r\n        ).start();\r\n    }\r\n\r\n    @Override\r\n    public int getActionType() {\r\n        return ReceivedActionsCodes.ACTION_RECEIVE_FILE;\r\n    }\r\n\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/backend/actions/ActionReceiveFile.java	(revision e6e94de09e19df21d75d3ce64fbe2a44395344f9)
+++ src/main/java/backend/actions/ActionReceiveFile.java	(date 1595359666563)
@@ -63,6 +63,4 @@
     public int getActionType() {
         return ReceivedActionsCodes.ACTION_RECEIVE_FILE;
     }
-
-
 }
