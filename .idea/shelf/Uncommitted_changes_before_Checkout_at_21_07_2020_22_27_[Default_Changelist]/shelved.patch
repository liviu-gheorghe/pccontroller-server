Index: src/main/java/backend/actions/ActionReceiveFile.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package backend.actions;\r\n\r\nimport backend.Action;\r\nimport backend.FileServer;\r\nimport backend.ReceivedActionsCodes;\r\n\r\nimport java.io.*;\r\n\r\npublic class ActionReceiveFile implements Action {\r\n\r\n    private final DataInputStream dataInputStream;\r\n    private final int BUFFER_SIZE = 1024*40;\r\n\r\n\r\n\r\n    public ActionReceiveFile(InputStream inputStream) {\r\n        dataInputStream = new DataInputStream(inputStream);\r\n    }\r\n\r\n    @Override\r\n    public void execute() {\r\n        new Thread(\r\n                () -> {\r\n                    int totalNumberOfBytes = 0;\r\n                    long t1 = System.currentTimeMillis();\r\n                    try {\r\n                        int filenameSize = dataInputStream.readInt();\r\n                        \r\n                        byte[] filenameBytes = dataInputStream.readNBytes(filenameSize);\r\n                        StringBuilder fileNameStringBuilder = new StringBuilder();\r\n                        for (byte filenameByte : filenameBytes) fileNameStringBuilder.append((char)filenameByte);\r\n\r\n                        System.out.println(\"Received file name : \" + fileNameStringBuilder.toString());\r\n                        File newFile = new File(System.getProperty(\"user.home\")+\"/Documents/\"+fileNameStringBuilder.toString());\r\n                        byte[] buffer = new byte[BUFFER_SIZE];\r\n                        int numberOfBytes;\r\n                        FileOutputStream fileOutputStream = new FileOutputStream(newFile);\r\n                        while((numberOfBytes = dataInputStream.read(buffer,0,BUFFER_SIZE)) != -1) {\r\n                            if(numberOfBytes > 0) {\r\n                                totalNumberOfBytes += numberOfBytes;\r\n                                fileOutputStream.write(buffer,0,numberOfBytes);\r\n                            }\r\n                        }\r\n                        fileOutputStream.close();\r\n                    } catch (IOException exception) {\r\n                        exception.printStackTrace();\r\n                    }\r\n                    finally {\r\n                        FileServer.getInstance().clearConnection();\r\n                    }\r\n                    long t2 = System.currentTimeMillis();\r\n                    double seconds = (t2-t1)/1000.0;\r\n                    System.out.printf(\"Transferred %d bytes successfully , time = %fs\\n\",totalNumberOfBytes,seconds);\r\n                    double transferSpeed = (totalNumberOfBytes/(1024*1024.0))/seconds;\r\n                    System.out.printf(\"Average transfer speed is : %f MB/s\",transferSpeed);\r\n                }\r\n        ).start();\r\n    }\r\n\r\n    @Override\r\n    public int getActionType() {\r\n        return ReceivedActionsCodes.ACTION_RECEIVE_FILE;\r\n    }\r\n\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/backend/actions/ActionReceiveFile.java	(revision d88fc9540415e239c4f0eefc7aee893c91c0b56d)
+++ src/main/java/backend/actions/ActionReceiveFile.java	(date 1595359659512)
@@ -61,6 +61,4 @@
     public int getActionType() {
         return ReceivedActionsCodes.ACTION_RECEIVE_FILE;
     }
-
-
 }
